<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        <link rel="canonical" href="https://datapuntamsterdam.github.io/contrib-guide/coding/python/">
        <link rel="shortcut icon" href="../../favicon.png">
        
        <title>Python - Contributing</title>
        <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../css/font-awesome-4.5.0.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="../../css/highlight.css">
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
	
	<script src="../../js/jquery-1.10.2.min.js"></script>
        <script src="../../js/bootstrap-3.0.3.min.js"></script>
        <script src="../../js/highlight.pack.js"></script> 
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="../..">Contributing</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                    <li >
                        <a href="../..">Introduction</a>
                    </li>
                    <li >
                        <a href="../../projects/">Projects</a>
                    </li>
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Coding <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="../">General</a>
</li>
                            
<li class="active">
    <a href="./">Python</a>
</li>
                        </ul>
                    </li>
                </ul>

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                    <li >
                        <a rel="next" href="../">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li class="disabled">
                        <a rel="prev" >
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
                    <li>
                        <a href="https://github.com/DatapuntAmsterdam/contrib-guide/">
                                <i class="fa fa-github"></i>GitHub
                        </a>
                    </li>
            </ul>
        </div>
    </div>
</div>

        <div class="container">
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="main active"><a href="#python-coding-guidelines">Python coding guidelines</a></li>
            <li><a href="#flake8">flake8</a></li>
            <li><a href="#documentation">Documentation</a></li>
            <li><a href="#imports">Imports</a></li>
            <li><a href="#libraries">Libraries</a></li>
            <li><a href="#naming">Naming</a></li>
            <li><a href="#testing">Testing</a></li>
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h1 id="python-coding-guidelines">Python coding guidelines</h1>
<p>In general we try to follow the common community guidelines,
including PEP-8 and PEP-257. But these don't cover everything
important and we make a few exceptions.</p>
<h2 id="flake8">flake8</h2>
<p>Every commit should pass an automated flake8 check with the plugins <code>pep8</code>,
<code>mccabe</code>, and <code>pep8-naming</code> and this configuration:</p>
<pre><code class="ini"># one section of flake.cfg

[flake8]
#ignore=E501,E225,E261,W391,E241,E203,W292,W391

exclude=.git,migrations,docs,scripts
max-complexity=8
max-line-length = 119
statistics=True
jobs=1
</code></pre>

<h3 id="commit-hooks">Commit hooks</h3>
<p>Git hooks are great for fast and light-weight tests. Here's how you can setup
your commit hooks for automated style checks. This assumes your project has a
Makefile with a linter command named <code>check</code>:</p>
<pre><code># .git/hooks/pre-commit

#!/bin/sh
make check
</code></pre>
<p>Make sure that your virtualenv containing flake8 is activated when committing.
Also note that this probably won't work form within Sourcetree, but it's better
for you to stay in the shell anyway.</p>
<p><em>TODO: consider also using the <code>flake8-pep257</code> and <code>flake8-print</code> plugins to
automate more tests.</em></p>
<h2 id="documentation">Documentation</h2>
<h3 id="class-docstrings">class docstrings</h3>
<p>Whenever you create a class, add a docstring with at least a one-liner:</p>
<pre><code class="py">class SomeClass(object):
    &quot;&quot;&quot;The one-line explaination&quot;&quot;&quot;
    pass
</code></pre>

<p>If a longer description would be helpful, skip a line and use more sections
(each is optional).  Don't provide useless information like "the attribute
<code>name</code> is the name of the object":</p>
<pre><code class="py">class SomeClass(object):
    &quot;&quot;&quot;Always start with a stand-alone one-liner

    This class has no side-effects.

    Attributes:
        name: what end-users call this instance
    &quot;&quot;&quot;
    pass
</code></pre>

<h3 id="function-docstrings">Function docstrings</h3>
<p>Similarly:</p>
<pre><code class="py">def simple_function(abc):
    &quot;&quot;&quot;This function ignores the arguments and always returns None&quot;&quot;&quot;
    pass

def complex_function(abc):
    &quot;&quot;&quot;Always use a one-liner

    Arguments:
        abc: the letters of the alphabet
    &quot;&quot;&quot;
    pass
</code></pre>

<h3 id="blank-lines">Blank lines</h3>
<p>Don't include unnecessary blank lines around the docstrings.</p>
<h2 id="imports">Imports</h2>
<p>Do not use wildcard imports.</p>
<p>Imports don't have to be in alphabetical order. It is however more or less of a
convention that imports that are the furthest away from the current module in
are the highest on top. So standard library imports like <code>os</code>, <code>system</code> etc. go
on top. Then come imports from installed packages; <code>django</code>, <code>celery</code> etc. and
finally that belong to the current project.</p>
<p>Prefer one line for one import</p>
<h2 id="libraries">Libraries</h2>
<p>Before adding a new library, consider the long-term maintenance cost and risk
of abandoned projects. It's often easier to copy code into our project or write
it ourselves. If we can't use a stable and recent PyPi release, the threshold
for time-saved should be even higher.</p>
<p>We have agreed that the following Python libraries are definitely worth it:</p>
<ul>
<li>Django</li>
<li>Django REST Framework</li>
<li>Flask</li>
<li>Swagger / OpenAPI</li>
<li>psycopg2</li>
<li>elasticsearch</li>
<li>elasticsearch-dsl</li>
</ul>
<h2 id="naming">Naming</h2>
<ul>
<li>don't start method names with <code>get_</code> or <code>set_</code>. Use properties if possible.</li>
</ul>
<h2 id="testing">Testing</h2>
<ul>
<li>new behaviors should be accompanied by new tests</li>
<li>if a behavior is changed and no tests break, that indicates
  an important hole in our coverage.</li>
<li>tests should work without internet access or a local database installed</li>
</ul>
<p>Use the following testing libraries:</p>
<ul>
<li>Mock</li>
<li>py.test</li>
</ul></div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>var base_url = '../..';</script>
        <script data-main="../../mkdocs/js/search.js" src="../../mkdocs/js/require.js"></script>
        <script src="../../js/base.js"></script><div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
