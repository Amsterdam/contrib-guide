<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../favicon.png">
  
  <title>Python - Contributing to Datapunt</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../css/highlight.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Python";
    var mkdocs_page_input_path = "python.md";
    var mkdocs_page_url = "/python/";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js"></script>
  <script src="../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../js/highlight.pack.js"></script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> Contributing to Datapunt</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="..">Introduction</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../projects/">Projects</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 current">
        <a class="current" href="./">Python</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#flake8">flake8</a></li>
                
                    <li><a class="toctree-l4" href="#commit-hooks">Commit hooks</a></li>
                
            
                <li class="toctree-l3"><a href="#documentation">Documentation</a></li>
                
                    <li><a class="toctree-l4" href="#class-docstrings">class docstrings</a></li>
                
                    <li><a class="toctree-l4" href="#function-docstrings">Function docstrings</a></li>
                
                    <li><a class="toctree-l4" href="#blank-lines">Blank lines</a></li>
                
            
                <li class="toctree-l3"><a href="#imports">Imports</a></li>
                
            
                <li class="toctree-l3"><a href="#libraries">Libraries</a></li>
                
            
                <li class="toctree-l3"><a href="#naming">Naming</a></li>
                
            
                <li class="toctree-l3"><a href="#testing">Testing</a></li>
                
            
            </ul>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../code/">Code</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../self/">Self</a>
        
    </li>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">Contributing to Datapunt</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>Python</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/DatapuntAmsterdam/style-guide/edit/master/docs/python.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <p>In general we try to follow the common community guidelines,
including PEP-8 and PEP-257. But these don't cover everything
important and we make a few exceptions.</p>
<h2 id="flake8">flake8</h2>
<p>Every commit should pass an automated flake8 check with the plugins <code>pep8</code>,
<code>mccabe</code>, and <code>pep8-naming</code> and this configuration:</p>
<pre><code class="ini"># one section of flake.cfg

[flake8]
#ignore=E501,E225,E261,W391,E241,E203,W292,W391

exclude=.git,migrations,docs,scripts
max-complexity=8
max-line-length = 119
statistics=True
jobs=1
</code></pre>

<h3 id="commit-hooks">Commit hooks</h3>
<p>Git hooks are great for fast and light-weight tests. Here's how you can setup
your commit hooks for automated style checks. This assumes your project has a
Makefile with a linter command named <code>check</code>:</p>
<pre><code># .git/hooks/pre-commit

#!/bin/sh
make check
</code></pre>
<p>Make sure that your virtualenv containing flake8 is activated when committing.
Also note that this probably won't work form within Sourcetree, but it's better
for you to stay in the shell anyway.</p>
<p><em>TODO: consider also using the <code>flake8-pep257</code> and <code>flake8-print</code> plugins to
automate more tests.</em></p>
<h2 id="documentation">Documentation</h2>
<h3 id="class-docstrings">class docstrings</h3>
<p>Whenever you create a class, add a docstring with at least a one-liner:</p>
<pre><code class="py">class SomeClass(object):
    &quot;&quot;&quot;The one-line explaination&quot;&quot;&quot;
    pass
</code></pre>

<p>If a longer description would be helpful, skip a line and use more sections
(each is optional).  Don't provide useless information like "the attribute
<code>name</code> is the name of the object":</p>
<pre><code class="py">class SomeClass(object):
    &quot;&quot;&quot;Always start with a stand-alone one-liner

    This class has no side-effects.

    Attributes:
        name: what end-users call this instance
    &quot;&quot;&quot;
    pass
</code></pre>

<h3 id="function-docstrings">Function docstrings</h3>
<p>Similarly:</p>
<pre><code class="py">def simple_function(abc):
    &quot;&quot;&quot;This function ignores the arguments and always returns None&quot;&quot;&quot;
    pass

def complex_function(abc):
    &quot;&quot;&quot;Always use a one-liner

    Arguments:
        abc: the letters of the alphabet
    &quot;&quot;&quot;
    pass
</code></pre>

<h3 id="blank-lines">Blank lines</h3>
<p>Don't include unnecessary blank lines around the docstrings.</p>
<h2 id="imports">Imports</h2>
<p>Do not use wildcard imports.</p>
<p>Imports don't have to be in alphabetical order. It is however more or less of a
convention that imports that are the furthest away from the current module in
are the highest on top. So standard library imports like <code>os</code>, <code>system</code> etc. go
on top. Then come imports from installed packages; <code>django</code>, <code>celery</code> etc. and
finally that belong to the current project.</p>
<p>Prefer one line for one import</p>
<h2 id="libraries">Libraries</h2>
<p>Before adding a new library, consider the long-term maintenance cost and risk
of abandoned projects. It's often easier to copy code into our project or write
it ourselves. If we can't use a stable and recent PyPi release, the threshold
for time-saved should be even higher.</p>
<p>We have agreed that the following Python libraries are definitely worth it:</p>
<ul>
<li>Django</li>
<li>Django REST Framework</li>
<li>Flask</li>
<li>Swagger / OpenAPI</li>
<li>psycopg2</li>
<li>elasticsearch</li>
<li>elasticsearch-dsl</li>
</ul>
<h2 id="naming">Naming</h2>
<ul>
<li>don't start method names with <code>get_</code> or <code>set_</code>. Use properties if possible.</li>
</ul>
<h2 id="testing">Testing</h2>
<ul>
<li>new behaviors should be accompanied by new tests</li>
<li>if a behavior is changed and no tests break, that indicates
  an important hole in our coverage.</li>
<li>tests should work without internet access or a local database installed</li>
</ul>
<p>Use the following testing libraries:</p>
<ul>
<li>Mock</li>
<li>py.test</li>
</ul>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../code/" class="btn btn-neutral float-right" title="Code">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../projects/" class="btn btn-neutral" title="Projects"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>
    
  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/DatapuntAmsterdam/style-guide/" class="icon icon-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../projects/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../code/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script src="../js/theme.js"></script>

</body>
</html>
